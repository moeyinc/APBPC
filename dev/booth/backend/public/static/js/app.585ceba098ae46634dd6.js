webpackJsonp([1],{"+BHd":function(t,e){},"09we":function(t,e){},"4uGN":function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNCAxNiI+PHRpdGxlPkFSUk9XPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iX0dyb3VwXyIgZGF0YS1uYW1lPSImbHQ7R3JvdXAmZ3Q7Ij48cG9seWdvbiBwb2ludHM9IjcgMCAwIDcgNCA3IDQgMTYgMTAgMTYgMTAgNyAxNCA3IDcgMCIvPjwvZz48L2c+PC9zdmc+"},"BMc/":function(t,e){},FmQJ:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxODMuNTYgMzYxLjc3Ij48dGl0bGU+cmVjb3JkaW5nPC90aXRsZT48cmVjdCB4PSI0Ni43NCIgd2lkdGg9IjkwLjA4IiBoZWlnaHQ9IjI1Mi41NiIgcng9IjM5LjUzIiByeT0iMzkuNTMiLz48cGF0aCBkPSJNMjY5LjI4LDIyOC44NmMwLDQxLjE2LTQwLDc0LjUzLTg5LjI4LDc0LjUzUzkwLjcyLDI3MCw5MC43MiwyMjguODYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04OC4yMikiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOjVweCIvPjxsaW5lIHgxPSI5MS43OCIgeTE9IjMwMy40IiB4Mj0iOTEuNzgiIHkyPSIzNTkuMjciIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOjVweCIvPjxsaW5lIHgxPSI0MC44NCIgeTE9IjM1OS4yNyIgeDI9IjE0Mi43MiIgeTI9IjM1OS4yNyIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2Utd2lkdGg6NXB4Ii8+PC9zdmc+"},HdDC:function(t,e){},NBf3:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW");i("feh2");var o={name:"app",data:function(){return{monitorWidth:1920,monitorHeight:1080,showNextView:!1,appTimer:null}},created:function(){this.resetAppTimer()},mounted:function(){this.resize(),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{resize:function(){var t=void 0,e=window.innerWidth/this.monitorWidth,i=window.innerHeight/this.monitorHeight;t=e<i?e:i;document.getElementById("app").style.zoom=t},displayRipple:function(t){var e=document.getElementById("ripple");e&&e.parentNode.removeChild(e);var i=t.clientX-15,n=t.clientY-15,o=document.createElement("span");o.id="ripple",o.style.width="30px",o.style.height="30px",o.style.left=i+"px",o.style.top=n+"px";document.getElementById("app").appendChild(o),o.classList.add("rippleEffect")},resetAppTimer:function(){var t=this;clearTimeout(this.appTimer),this.appTimer=setTimeout(function(){console.log("Timeout: 10 mins passed. Returning to Home screen."),t.jumpTo("home",{dir:"home"})},6e5)}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{width:t.monitorWidth+"px",height:t.monitorHeight+"px"},attrs:{id:"app"},on:{click:function(e){t.displayRipple(e),t.resetAppTimer()},mousemove:function(e){t.resetAppTimer()}}},[i("router-view")],1)},staticRenderFns:[]},s=i("VU/8")(o,r,!1,function(t){i("+BHd")},null,null).exports,a=i("/ocq"),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-wrapper"},[e("transition",{attrs:{name:this.transitionName}},[e("router-view",{staticClass:"child-view"})],1)],1)},staticRenderFns:[]},l=i("VU/8")({name:"parent",data:function(){return{transitionName:"slide-right"}},beforeRouteUpdate:function(t,e,i){switch(t.params.dir){case"left":this.transitionName="slide-right";break;case"right":this.transitionName="slide-left";break;case"home":this.transitionName="fade";break;default:this.transitionName="slide-left"}i()},computed:{getTransitionName:function(){return"slide-left"}}},c,!1,function(t){i("dUDK")},"data-v-157f6eda",null).exports,d={name:"svg-button",props:{hasLabel:Boolean,id:String,width:String,height:String,border:String,borderRadius:String,boxShadow:String,paddingTop:String,svgWrapperHeight:String,svgWidth:String,svgHeight:String,svgLabelGap:String,labelWrapperHeight:String,labelHeight:String,paddingBottom:String,svgSrc:String,font:String,lineHeight:String,letterSpacing:String,textContent:String,regularBgColor:String,regularTextColor:String,activeBgColor:String,activeTextColor:String},data:function(){return{isActive:!1}},computed:{getButtonStyle:function(){return{width:this.width,height:this.height,border:this.border,borderRadius:this.borderRadius,boxShadow:this.boxShadow,paddingTop:this.paddingTop,paddingBottom:this.paddingBottom,backgroundColor:this.getBgColor,textAlign:"center"}},getSvgWrapperStyle:function(){return{height:this.svgWrapperHeight}},getLabelWrapperStyle:function(){return{height:this.labelWrapperHeight,marginTop:this.svgLabelGap}},getLabelStyle:function(){return{height:this.labelHeight,lineHeight:this.lineHeight,letterSpacing:this.letterSpacing,font:this.font,color:this.getTextColor}},getBgColor:function(){return this.isActive?this.activeBgColor:this.regularBgColor},getTextColor:function(){return this.isActive?this.activeTextColor:this.regularTextColor}},methods:{toggle:function(){this.isActive=!this.isActive},resetClick:function(){this.isActive=!1},clicked:function(){this.$emit("clicked")}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.getButtonStyle,attrs:{id:t.id},on:{mousedown:t.toggle,mouseup:t.toggle,mouseleave:t.resetClick,click:function(e){t.clicked()}}},[i("div",{staticClass:"svg-wrapper",style:t.getSvgWrapperStyle},[i("simple-svg",{staticClass:"simple-svg",attrs:{filepath:t.svgSrc,fill:t.getTextColor,stroke:t.getTextColor,width:t.svgWidth,height:t.svgHeight}})],1),t._v(" "),i("div",{staticClass:"label-wrapper",style:t.getLabelWrapperStyle},[i("p",{staticClass:"button-label",style:t.getLabelStyle,domProps:{innerHTML:t._s(t.textContent)}})])])},staticRenderFns:[]},g=i("VU/8")(d,u,!1,function(t){i("jLtp")},"data-v-5fb413be",null).exports,h={name:"svg-button",props:{id:String,width:String,height:String,border:String,borderRadius:String,boxShadow:String,padding:String,font:String,lineHeight:String,letterSpacing:String,textAlign:String,textTitle:String,textContent:String,regularBgColor:String,regularTextColor:String,activeBgColor:String,activeTextColor:String,titleLineHeight:String,titleLetterSpacing:String,titleFont:String,titleTextAlign:String,titleFontWeight:String,titleHeight:String,bodyHeight:{type:String,default:"100%"},titleMarginBottom:String},data:function(){return{isActive:!1}},computed:{getButtonStyle:function(){return{width:this.width,height:this.height,border:this.border,borderRadius:this.borderRadius,boxShadow:this.boxShadow,padding:this.padding,backgroundColor:this.getBgColor,textAlign:"center"}},getLabelStyle:function(){return{lineHeight:this.lineHeight,letterSpacing:this.letterSpacing,font:this.font,color:this.getTextColor,textAlign:this.textAlign}},getTitleStyle:function(){return{lineHeight:this.titleLineHeight,letterSpacing:this.titleLetterSpacing,font:this.titleFont,color:this.getTextColor,textAlign:this.titleTextAlign,fontWeight:this.titleFontWeight}},getBgColor:function(){return this.isActive?this.activeBgColor:this.regularBgColor},getTextColor:function(){return this.isActive?this.activeTextColor:this.regularTextColor}},methods:{toggle:function(){this.isActive=!this.isActive},resetClick:function(){this.isActive=!1},clicked:function(){this.$emit("clicked")}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.getButtonStyle,attrs:{id:t.id},on:{mousedown:t.toggle,mouseup:t.toggle,mouseleave:t.resetClick,click:function(e){t.clicked()}}},[i("div",{staticClass:"inner"},[t.textTitle?i("div",{staticClass:"title-wrapper",style:{height:t.titleHeight,marginBottom:t.titleMarginBottom}},[i("h2",{staticClass:"button-title",style:t.getTitleStyle},[t._v("\n        "+t._s(t.textTitle.toUpperCase())+"\n      ")])]):t._e(),t._v(" "),i("div",{staticClass:"body-wrapper",style:{height:t.bodyHeight}},[i("p",{staticClass:"button-label",style:t.getLabelStyle,domProps:{innerHTML:t._s(t.textContent)}})])])])},staticRenderFns:[]},v=i("VU/8")(h,p,!1,function(t){i("oSA7")},"data-v-514e8b4b",null).exports,m={name:"home",components:{SvgButton:g,TextButton:v},created:function(){this.$store.commit("resetTopic")}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[t._m(0),t._v(" "),n("hr",{staticClass:"top-divider"}),t._v(" "),n("main",[n("div",{staticClass:"main-inner"},[t._m(1),t._v(" "),n("div",{staticClass:"svg-button-container"},[n("svg-button",{staticClass:"svg-button",attrs:{"has-label":!0,width:"520px",height:"370px","padding-top":"40px","svg-wrapper-height":"180px","svg-label-gap":"10px","label-wrapper-height":"100px","padding-bottom":"40px","svg-width":"auto","svg-height":"140px","svg-src":i("FmQJ"),"label-height":"100px",font:"bold 36px Arquitecta","line-height":"150px","letter-spacing":"3px","text-content":"RECORD YOUR<br />OWN STORY","regular-bg-color":"#47673b","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"#47673b","border-radius":"50px"},on:{clicked:function(e){t.jumpTo("recording-topics",{dir:"right"})}}}),t._v(" "),n("svg-button",{staticClass:"svg-button",attrs:{"has-label":!0,width:"520px",height:"370px","padding-top":"40px","svg-wrapper-height":"180px","svg-label-gap":"10px","label-wrapper-height":"100px","padding-bottom":"40px","svg-width":"auto","svg-height":"120px","svg-src":i("WpX3"),"label-height":"100px",font:"bold 36px Arquitecta","line-height":"150px","letter-spacing":"3px","text-content":"LISTEN TO OTHER<br />VISITORS’ STORIES","regular-bg-color":"#47673b","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"#47673b","border-radius":"50px"},on:{clicked:function(e){t.jumpTo("listening-topics",{dir:"right"})}}})],1)])]),t._v(" "),n("hr",{staticClass:"bottom-divider"}),t._v(" "),n("footer",[n("div",{staticClass:"container"},[n("p",{staticClass:"font-hoefler-italic footer-text"},[t._v("\n        Already have a recorded video?\n      ")]),t._v(" "),n("text-button",{staticClass:"text-button",attrs:{width:"350px",height:"50px","border-radius":"15px",font:"bold 30px Arquitecta","letter-spacing":"3px","text-content":"SEND US AN EMAIL!","regular-bg-color":"#47673b","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"#47673b"},on:{clicked:function(e){t.jumpTo("send-us-your-story")}}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h1",{staticClass:"font-hoefler-regular"},[this._v("People and the Pine Bush")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("p",{staticClass:"lead-text"},[this._v("\n          Our community values the Pine Bush for many reasons. We encourage you to contribute your own story, or listen to the stories of others who enjoy the Pine Bush and what value it provides them.\n        ")])])}]},x=i("VU/8")(m,f,!1,function(t){i("tltS")},"data-v-6f3f489b",null).exports,b={name:"page-aside",components:{SvgButton:g},props:{hasBackButton:Boolean,backTo:String}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",[n("div",{staticClass:"home-button-wrapper"},[n("svg-button",{attrs:{"has-label":!1,width:"80px",height:"80px","svg-width":"80px","svg-height":"80px","svg-src":i("jzNX"),"regular-bg-color":"","regular-text-color":"#efdfd4","active-bg-color":"","active-text-color":"#47673b"},on:{clicked:function(e){t.jumpTo("home",{dir:"home"})}}})],1),t._v(" "),t.hasBackButton?n("div",{staticClass:"back-button-wrapper"},[n("svg-button",{attrs:{"has-label":!1,width:"80px",height:"80px","svg-width":"80px","svg-height":"80px","svg-src":i("wYpQ"),"regular-bg-color":"","regular-text-color":"#efdfd4","active-bg-color":"","active-text-color":"#47673b"},on:{clicked:function(e){t.jumpTo(t.backTo,{dir:"left"})}}})],1):t._e()])},staticRenderFns:[]},T=i("VU/8")(b,C,!1,function(t){i("jPIW")},"data-v-bbf12ec2",null).exports,S={name:"record-select-topics",data:function(){return{topics:[]}},components:{PageAside:T,TextButton:v},created:function(){var t=this;this.$store.dispatch("getTopics").then(function(e){t.topics=e})},computed:{getActiveTopicCount:function(){for(var t=0,e=0;e<this.topics.length;e++)parseInt(this.topics[e].active)&&t++;return t},getButtonWidth:function(){return this.getActiveTopicCount>=4?"680px":this.getActiveTopicCount<=3?"1460px":void 0},getButtonHeight:function(){return this.getActiveTopicCount>=7?"140px":this.getActiveTopicCount>=5||3===this.getActiveTopicCount?"170px":4===this.getActiveTopicCount||this.getActiveTopicCount<=2?"280px":void 0},getMarginBottom:function(){return this.getActiveTopicCount>=7?"30px":this.getActiveTopicCount<=6?"50px":void 0},getButtonFont:function(){return this.getActiveTopicCount>=7?"28px Arquitecta":this.getActiveTopicCount>=5?"36px Arquitecta":this.getActiveTopicCount>=3?"45px Arquitecta":this.getActiveTopicCount<=2?"70px Arquitecta":void 0},getButtonTitleFont:function(){return this.getActiveTopicCount>=5?"20px Arquitecta":this.getActiveTopicCount>=3?"26px Arquitecta":this.getActiveTopicCount<=2?"26px Arquitecta":void 0},getPadding:function(){return this.getActiveTopicCount>=5?"15px 50px":this.getActiveTopicCount>=3?"30px 50px":this.getActiveTopicCount<=2?"30px 50px":void 0}},methods:{setTopic:function(t){this.$store.commit("setTopic",{topic:t.question}),this.jumpTo("recording-start",{dir:"right"})}}},w={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wrapper"},[i("page-aside",{attrs:{"has-back-button":!0,"back-to":"home"}}),t._v(" "),t._m(0),t._v(" "),i("hr",{staticClass:"top-divider"}),t._v(" "),i("main",[i("div",{staticClass:"main-inner"},[i("div",[i("p",{staticClass:"lead-text",style:{marginBottom:t.getMarginBottom}},[t._v("\n          Select from the topics below to hear other people's thoughts and opinions on the Pine Bush.\n        ")])]),t._v(" "),i("div",{staticClass:"text-button-container"},t._l(t.topics,function(e,n){return parseInt(e.active)?i("text-button",{key:n,style:{marginBottom:t.getMarginBottom},attrs:{width:t.getButtonWidth,height:t.getButtonHeight,"border-radius":"40px",padding:t.getPadding,font:t.getButtonFont,"letter-spacing":"1px","text-align":"left","text-title":e.topic,"text-content":e.question,"regular-bg-color":"#47673b","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"#47673b","title-letter-spacing":"1px","title-font":t.getButtonTitleFont,"title-text-align":"left","title-font-weight":"bold","title-height":"10%","title-margin-bottom":"10px","body-height":"80%"},on:{clicked:function(i){t.setTopic(e)}}}):t._e()}))])]),t._v(" "),i("hr",{staticClass:"bottom-divider"}),t._v(" "),i("footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h2",[this._v("RECORD YOUR OWN STORY")])])}]},y=i("VU/8")(S,w,!1,function(t){i("BMc/")},"data-v-4fe5c53a",null).exports,M=i("//Fk"),L=i.n(M),A=i("RBYm"),_=i.n(A),R={name:"circular-visual-recording-timer",props:{isRecording:Boolean,id:String,diameter:Number,outlineColor:String,indicatorColor:String,circleFillColor:String,textColor:String,outlineWidth:Number,maxTime:Number,labelContent:String,labelFont:String,labelTop:String,timeFont:String},data:function(){return{p5Instance:null,timer:null,passedTime:0}},watch:{isRecording:function(t){var e=this;!0===t?this.timer=setInterval(function(){e.passedTime+=10},10):!1===t&&(this.passedTime=0,clearInterval(this.timer))},passedTime:function(t){t>=this.maxTime&&(this.$emit("time-over"),this.passedTime=0,clearInterval(this.timer))}},mounted:function(){this.createP5Instance()},computed:{getWrapperStyle:function(){return{width:this.diameter+"px",height:this.diameter+"px"}},getTextStyle:function(){return{font:this.font,letterSpacing:this.letterSpacing,color:this.textColor}},getLabelStyle:function(){return{font:this.labelFont,top:this.labelTop}},getTimeStyle:function(){return{font:this.timeFont}},getTimeExpression:function(){var t=Math.ceil(this.getRemainingTime/1e3%60),e=parseInt(this.getRemainingTime/6e4%60);return 60===t&&(e++,t=0),t=t<10?"0"+t:t,e+":"+t},getRemainingTime:function(){return this.maxTime-this.passedTime}},methods:{createP5Instance:function(){var t=this.$props,e=this.$data;this.p5Instance=new _.a(function(i){i.setup=function(){console.log("p5 is setting up"),i.createCanvas(t.diameter,t.diameter).canvas.style.borderRadius=t.diameter/2+"px",i.colorMode(i.HSB,360,100,100,1)},i.draw=function(){var n={x:t.diameter/2,y:t.diameter/2};i.noStroke(),i.fill(t.outlineColor),i.ellipse(n.x,n.y,t.diameter,t.diameter);var o=-Math.PI/2,r=o+e.passedTime/t.maxTime*(2*Math.PI);i.fill(t.indicatorColor);var s=Math.abs(o-r);t.isRecording&&s>1e-5&&i.arc(n.x,n.y,1.1*t.diameter,1.1*t.diameter,o,r),i.fill(t.circleFillColor),i.ellipse(n.x,n.y,t.diameter-t.outlineWidth,t.diameter-t.outlineWidth)}},this.id)}}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circular-visual-recording-timer",style:this.getWrapperStyle,attrs:{id:this.id}},[e("div",{staticClass:"label",style:[this.getTextStyle,this.getLabelStyle]},[this._v("\n    "+this._s(this.labelContent)+"\n  ")]),this._v(" "),e("div",{staticClass:"time",style:[this.getTextStyle,this.getTimeStyle]},[this._v("\n    "+this._s(this.getTimeExpression)+"\n  ")])])},staticRenderFns:[]},D=i("VU/8")(R,I,!1,function(t){i("zE6X")},"data-v-d6e0caca",null).exports,E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"record-instruction-dialog floating"},[n("div",{staticClass:"arrow-wrapper"},[n("simple-svg",{staticClass:"arrow",attrs:{filepath:i("4uGN"),fill:"orange",stroke:"orange",width:"50px",height:"50px"}})],1),t._v(" "),n("div",{staticClass:"dialog-body",on:{click:function(e){e.stopPropagation(),t.$emit("clicked")}}},[n("p",[t._v("\n      PLEASE LOOK AND SPEAK TO THE CAMERA ABOVE!\n    ")])])])},staticRenderFns:[]},B=i("VU/8")({name:"RecordInstructionDialog"},E,!1,function(t){i("NBf3")},"data-v-364771be",null).exports,j=i("mbvs"),N=i.n(j),k="http://apbpc-server.local:2900",z="/api/upload-video",P="/api/download-videos",U="/api/get-topics",W={width:1920,height:1080},O=18e4,H={name:"record-record-story",components:{PageAside:T,CircularVisualRecordingTimer:D,TextButton:v,RecordInstructionDialog:B},data:function(){return{questionTextFontSize:50,recorder:null,mediaStream:null,videoElement:null,isStreamReady:!1,isRecording:!1,isPlayingCountDown:!1,countDownTimer:3,dialog:!0,inputLevel:0}},mounted:function(){this.initVideo(),this.adjustFontSize()},computed:{getRecordingMaxLength:function(){return O},getTextButtonStyle:function(){return this.isStreamReady?"":{filter:"opacity(30%)"}},getInputBlockNum:function(){return Math.floor(this.inputLevel%10)},getIndicatorBarWidth:function(){return{width:this.inputLevel/100*500+"px"}}},methods:{initVideo:function(){var t=this;this.videoElement=document.getElementById("recording-video"),this.captureUserMedia(function(e){t.mediaStream=e,t.videoElement.src=window.URL.createObjectURL(e),t.videoElement.play(),t.videoElement.muted=!0,t.videoElement.controls=!1,t.initAudioLevelMeter(e),t.isStreamReady=!0})},initAudioLevelMeter:function(t){var e=new AudioContext,i=e.createAnalyser(),n=e.createMediaStreamSource(t),o=e.createScriptProcessor(2048,1,1);i.smoothingTimeConstant=.8,i.fftSize=1024,n.connect(i),i.connect(o),o.connect(e.destination);var r=this;o.onaudioprocess=function(){var t=new Uint8Array(i.frequencyBinCount);i.getByteFrequencyData(t);for(var e=0,n=t.length,o=0;o<n;o++)e+=t[o];var s=e/n;r.inputLevel=s}},adjustFontSize:function(){var t=this,e=function(e,i,n){i>e&&(t.questionTextFontSize--,t.$nextTick().then(function(){i=t.$el.querySelector(".question-text").clientWidth,n(e,i,n)}))};e(this.$el.querySelector(".selected-topic-wrapper").clientWidth,this.$el.querySelector(".question-text").clientWidth,e)},captureUserMedia:function(t){var e=this,i={audio:!0,video:W};console.log("caotyring user media"),navigator.mediaDevices.getUserMedia(i).then(t).catch(function(t){console.error("Unable to capture the camera. Please make sure the camera is connected and reboot the computer."),console.error(t),e.jumpTo("home",{dir:"home"})})},startRecording:function(){var t=this;this.isPlayingCountDown||this.startCountDown().then(function(){t.isRecording=!0,t.dialog=!1,t.recorder=N()(t.mediaStream,{type:"video"}),t.recorder.startRecording()})},startCountDown:function(){this.isPlayingCountDown=!0,this.countDownTimer=3;var t=this;return new L.a(function(e,i){var n=setInterval(function(){t.countDownTimer--,t.countDownTimer<=0&&(console.log("hey"),clearTimeout(n),t.isPlayingCountDown=!1,e())},1e3)})},stopRecording:function(){if(this.isRecording=!1,this.$store.state.selectedTopic){var t=this,e=function(){var e=t.recorder.getBlob(),i=Math.floor(Date.now()/1e3)+".webm";t.$store.dispatch("uploadVideo",{blob:e,fileName:i}).then(function(){t.jumpTo("recording-finish",{dir:"right"})})};this.recorder.stopRecording(e)}else alert("Topic is not selected!"),this.reset()},timeOver:function(){console.log("time over!!!"),this.stopRecording()},reset:function(){this.recorder.reset(),this.isRecording=!1}}},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wrapper"},[i("page-aside",{attrs:{"has-back-button":!0,"back-to":"recording-topics"}}),t._v(" "),i("div",{attrs:{id:"audio-level-meter"}},[i("div",{staticClass:"indicator-bar",style:t.getIndicatorBarWidth})]),t._v(" "),t._m(0),t._v(" "),i("hr",{staticClass:"top-divider"}),t._v(" "),i("main",[i("div",{staticClass:"main-inner"},[i("div",{staticClass:"selected-topic-wrapper"},[i("h5",{staticClass:"selected-topic"},[t._v("- SELECTED TOPIC -")]),t._v(" "),i("p",{staticClass:"question-text",style:{fontSize:t.questionTextFontSize+"px"}},[t._v("\n          "+t._s(t.$store.state.selectedTopic)+"\n        ")])]),t._v(" "),i("div",{staticClass:"recording-element-container"},[i("div",{staticClass:"video-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isPlayingCountDown,expression:"isPlayingCountDown"}],staticClass:"animation-layer"},[i("p",{staticClass:"timer-label"},[t._v("\n              "+t._s(t.countDownTimer)+"\n            ")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isRecording,expression:"isRecording"}],staticClass:"recording-indicator"},[t._v("\n            RECORDING\n          ")]),t._v(" "),i("video",{attrs:{id:"recording-video"}})]),t._v(" "),i("div",{staticClass:"controller-wrapper"},[i("div",{staticClass:"recording-timer-wrapper"},[i("circular-visual-recording-timer",{staticClass:"recording-timer",attrs:{"is-recording":t.isRecording,id:"recording-timer",diameter:300,"outline-color":"white","indicator-color":"red","circle-fill-color":"black","text-color":"white","outline-width":30,"max-time":t.getRecordingMaxLength,"label-content":"Time Remaining","label-font":"25px Arquitecta","label-top":"85px","time-font":"bold 80px Arquitecta"},on:{"time-over":t.timeOver}})],1),t._v(" "),i("div",{staticClass:"under-timer-wrapper"},[i("div",{staticClass:"under-timer-inner"},[i("text-button",{directives:[{name:"show",rawName:"v-show",value:!t.isRecording,expression:"!isRecording"}],staticClass:"text-button",style:t.getTextButtonStyle,attrs:{width:"300px",height:"120px","border-radius":"20px",font:"bold 40px Arquitecta","letter-spacing":"3px","text-content":"START<br/>RECORDING","regular-bg-color":"red","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"red"},on:{clicked:function(e){t.startRecording()}}}),t._v(" "),i("div",{staticClass:"recording-button-container"},[i("text-button",{directives:[{name:"show",rawName:"v-show",value:t.isRecording,expression:"isRecording"}],staticClass:"text-button",attrs:{width:"160px",height:"80px","border-radius":"14px",font:"bold 25px Arquitecta","letter-spacing":"3px","text-content":"OOPS!<br/>RESTART","regular-bg-color":"#47673b","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"#47673b"},on:{clicked:function(e){t.reset()}}}),t._v(" "),i("text-button",{directives:[{name:"show",rawName:"v-show",value:t.isRecording,expression:"isRecording"}],staticClass:"text-button",attrs:{width:"250px",height:"120px","border-radius":"20px",font:"bold 40px Arquitecta","letter-spacing":"3px","text-content":"FINISH","regular-bg-color":"red","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"red"},on:{clicked:function(e){t.stopRecording()}}})],1)],1)])])])])]),t._v(" "),i("hr",{staticClass:"bottom-divider"}),t._v(" "),i("footer"),t._v(" "),t.dialog?i("record-instruction-dialog",{on:{clicked:function(e){t.dialog=!1}}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h2",[this._v("RECORD YOUR OWN STORY")])])}]},V=i("VU/8")(H,F,!1,function(t){i("09we")},"data-v-23e982f2",null).exports,Y={name:"record-finished-recording",components:{PageAside:T,TextButton:v},data:function(){return{isPlaying:!0,videoElement:null}},mounted:function(){this.videoElement=this.$el.querySelector("#your-video")},methods:{playStopVideo:function(){this.isPlaying=!this.isPlaying,this.isPlaying?this.videoElement.play():this.videoElement.pause()}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wrapper"},[i("page-aside",{attrs:{"has-back-button":!1}}),t._v(" "),t._m(0),t._v(" "),i("hr",{staticClass:"top-divider"}),t._v(" "),i("main",[i("div",{staticClass:"main-inner"},[i("div",{staticClass:"thank-you-wrapper"},[i("p",{staticClass:"thank-you"},[t._v("\n          Thank you for telling us your story!\n        ")]),t._v(" "),i("div",{staticClass:"video-area"},[i("div",{staticClass:"video-wrapper"},[i("video",{attrs:{controls:"",autoplay:"",id:"your-video",src:t.$store.state.uploadedFileURL},on:{click:function(e){t.playStopVideo()}}})])]),t._v(" "),i("p",{staticClass:"note"},[t._v("\n          Your video will be published to other visitors after our staffs check the content.\n        ")])])])]),t._v(" "),i("hr",{staticClass:"bottom-divider"}),t._v(" "),i("footer",[i("text-button",{staticClass:"text-button",attrs:{width:"350px",height:"50px","border-radius":"15px",font:"bold 30px Arquitecta","letter-spacing":"3px","text-content":"BACK TO HOME","regular-bg-color":"#47673b","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"#47673b"},on:{clicked:function(e){t.jumpTo("home",{dir:"home"})}}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h2",[this._v("RECORD YOUR OWN STORY")])])}]},G=i("VU/8")(Y,$,!1,function(t){i("uzaf")},"data-v-6ad10a8b",null).exports,X={name:"listen-select-topics",data:function(){return{topics:[]}},components:{PageAside:T,TextButton:v},created:function(){var t=this;this.$store.dispatch("getTopics").then(function(e){t.topics=e})},computed:{getActiveTopicCount:function(){for(var t=0,e=0;e<this.topics.length;e++)parseInt(this.topics[e].active)&&t++;return t},getButtonWidth:function(){return this.getActiveTopicCount>=4?"680px":this.getActiveTopicCount<=3?"1460px":void 0},getButtonHeight:function(){return this.getActiveTopicCount>=7?"140px":this.getActiveTopicCount>=5||3===this.getActiveTopicCount?"170px":4===this.getActiveTopicCount||this.getActiveTopicCount<=2?"280px":void 0},getMarginBottom:function(){return this.getActiveTopicCount>=7?"30px":this.getActiveTopicCount<=6?"50px":void 0},getButtonFont:function(){return this.getActiveTopicCount>=7?"28px Arquitecta":this.getActiveTopicCount>=5?"36px Arquitecta":this.getActiveTopicCount>=3?"45px Arquitecta":this.getActiveTopicCount<=2?"70px Arquitecta":void 0},getButtonTitleFont:function(){return this.getActiveTopicCount>=5?"20px Arquitecta":this.getActiveTopicCount>=3?"26px Arquitecta":this.getActiveTopicCount<=2?"26px Arquitecta":void 0},getPadding:function(){return this.getActiveTopicCount>=5?"15px 50px":this.getActiveTopicCount>=3?"30px 50px":this.getActiveTopicCount<=2?"30px 50px":void 0}},methods:{setTopic:function(t){this.$store.commit("setTopic",{topic:t.question}),this.jumpTo("listening-watch",{dir:"right"})}}},q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wrapper"},[i("page-aside",{attrs:{"has-back-button":!0,"back-to":"home"}}),t._v(" "),t._m(0),t._v(" "),i("hr",{staticClass:"top-divider"}),t._v(" "),i("main",[i("div",{staticClass:"main-inner"},[i("div",[i("p",{staticClass:"lead-text",style:{marginBottom:t.getMarginBottom}},[t._v("\n          Select from the topics below to hear other people's thoughts and opinions on the Pine Bush.\n        ")])]),t._v(" "),i("div",{staticClass:"text-button-container"},t._l(t.topics,function(e,n){return parseInt(e.active)?i("text-button",{key:n,style:{marginBottom:t.getMarginBottom},attrs:{width:t.getButtonWidth,height:t.getButtonHeight,"border-radius":"40px",padding:t.getPadding,font:t.getButtonFont,"letter-spacing":"1px","text-align":"left","text-title":e.topic,"text-content":e.question,"regular-bg-color":"#47673b","regular-text-color":"#efdfd4","active-bg-color":"#efdfd4","active-text-color":"#47673b","title-letter-spacing":"1px","title-font":t.getButtonTitleFont,"title-text-align":"left","title-font-weight":"bold","title-height":"10%","title-margin-bottom":"10px","body-height":"80%"},on:{clicked:function(i){t.setTopic(e)}}}):t._e()}))])]),t._v(" "),i("hr",{staticClass:"bottom-divider"}),t._v(" "),i("footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h2",[this._v("LISTEN OTHER VISITORS’ STORIES")])])}]},Z=i("VU/8")(X,q,!1,function(t){i("HdDC")},"data-v-6a9add13",null).exports,J={name:"horizontal-scroll-video-gallery",props:{videoURLs:Array,selectedVideoURL:String,videoWidth:Number,videoHeight:Number,videoMargin:Number,videoContainerPadding:String,initialVideoContainerLeft:Number,selectedStyle:Object},data:function(){return{isDragging:!1,startDraggingPosX:0,startDraggingAbsPosX:0,videoContainerLeft:0}},created:function(){this.videoContainerLeft=this.initialVideoContainerLeft},computed:{getVideoSize:function(){return{width:this.videoWidth+"px",height:this.videoHeight+"px",margin:"0 "+this.videoMargin+"px"}},videoContainerWidth:function(){return this.videoURLs.length*(this.videoWidth+this.videoMargin)}},methods:{getSelectedStyle:function(t){if(t===this.selectedVideoURL)return this.selectedStyle},startDragging:function(t){this.initialVideoContainerLeft+this.videoContainerWidth>this.$el.offsetWidth&&(this.isDragging=!0,this.startDraggingPosX=t.pageX-this.videoContainerLeft),this.startDraggingAbsPosX=t.clientX},stopDragging:function(t){this.isDragging=!1},drag:function(t){if(this.isDragging){var e=t.pageX-this.startDraggingPosX,i=this.$el.offsetWidth-this.videoContainerWidth-this.initialVideoContainerLeft-this.initialVideoContainerLeft,n=0+this.initialVideoContainerLeft;e<i?e=i:e>n&&(e=n),this.videoContainerLeft=e}},clicked:function(t,e){Math.abs(this.startDraggingAbsPosX-t.clientX)>10?console.log("you are dragging"):this.$emit("clicked",e)}}},Q={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"video-container-wrapper"},[i("div",{staticClass:"video-container",style:{left:t.videoContainerLeft+"px",padding:t.videoContainerPadding},on:{mousedown:function(e){t.startDragging(e)},mousemove:function(e){t.drag(e)},mouseup:function(e){t.stopDragging(e)},mouseleave:function(e){t.stopDragging(e)}}},t._l(t.videoURLs,function(e,n){return i("video",{key:n,style:[t.getVideoSize,t.getSelectedStyle(e)],attrs:{preload:"metadata",src:e},on:{mouseup:function(i){t.clicked(i,e)}}})}))])},staticRenderFns:[]},K={name:"listen-other-stories",components:{PageAside:T,HorizontalScrollVideoGallery:i("VU/8")(J,Q,!1,function(t){i("ol+X")},"data-v-6117aa7f",null).exports},data:function(){return{questionTextFontSize:50,videoElement:null,videoURLs:[],selectedVideoURL:null,videoContainerWidth:0,isPlaying:!1}},created:function(){var t=this;this.$store.dispatch("getVideos").then(function(e){t.videoURLs=e,t.selectedVideoURL=t.videoURLs[0]})},mounted:function(){this.videoElement=document.getElementById("watching-video"),this.adjustFontSize()},methods:{adjustFontSize:function(){var t=this,e=function(e,i,n){i>e&&(t.questionTextFontSize--,t.$nextTick().then(function(){i=t.$el.querySelector(".question-text").clientWidth,n(e,i,n)}))};e(this.$el.querySelector(".selected-topic-wrapper").clientWidth,this.$el.querySelector(".question-text").clientWidth,e)},playStopVideo:function(){this.isPlaying=!this.isPlaying,this.isPlaying?this.videoElement.play():this.videoElement.pause()},switchVideo:function(t){this.selectedVideoURL=t}}},tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wrapper"},[i("page-aside",{attrs:{"has-back-button":!0,"back-to":"listening-topics"}}),t._v(" "),t._m(0),t._v(" "),i("hr",{staticClass:"top-divider"}),t._v(" "),i("main",[i("div",{staticClass:"main-inner"},[i("div",{staticClass:"selected-topic-wrapper"},[i("h5",{staticClass:"selected-topic"},[t._v("- SELECTED TOPIC -")]),t._v(" "),i("p",{staticClass:"question-text",style:{fontSize:t.questionTextFontSize+"px"}},[t._v("\n          "+t._s(t.$store.state.selectedTopic)+"\n        ")])]),t._v(" "),i("div",{staticClass:"video-area"},[i("div",{staticClass:"video-wrapper"},[i("video",{attrs:{autoplay:"",controls:"",id:"watching-video",src:t.selectedVideoURL},on:{click:function(e){t.playStopVideo()}}})])])])]),t._v(" "),i("footer",[i("horizontal-scroll-video-gallery",{attrs:{videoURLs:t.videoURLs,selectedVideoURL:t.selectedVideoURL,"video-width":192,"video-height":108,"video-margin":10,"initial-video-container-left":120,"video-container-padding":"37px 0px","selected-style":{filter:"brightness(50%)"}},on:{clicked:t.switchVideo}})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h2",[this._v("LISTEN OTHER VISITORS’ STORIES")])])}]},et=i("VU/8")(K,tt,!1,function(t){i("rKRb")},"data-v-2c8a333d",null).exports,it={name:"record-select-topics",components:{PageAside:T,TextButton:v}},nt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-wrapper"},[e("page-aside",{attrs:{"has-back-button":!0,"back-to":"home"}}),this._v(" "),this._m(0),this._v(" "),e("hr",{staticClass:"top-divider"}),this._v(" "),this._m(1),this._v(" "),e("hr",{staticClass:"bottom-divider"}),this._v(" "),e("footer")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h2",[this._v("SEND US YOUR STORY")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("main",[e("div",{staticClass:"main-inner"},[e("div",[e("p",{staticClass:"lead-text font-hoefler-regular"},[this._v("\n          You can send us your story via email."),e("br"),this._v("\n          Ask your parents to send your video to "),e("span",[this._v("info@albanypinebush.com")]),this._v(".\n        ")]),this._v(" "),e("ul",{staticClass:"notes"},[e("li",[this._v("\n            Please keep your videos under three minutes.\n          ")]),this._v(" "),e("li",[this._v("\n            If the file size of your video is too big to send, you may use cloud services such as Google Drive or Dropbox.\n          ")])])])])])}]},ot=i("VU/8")(it,nt,!1,function(t){i("r9Hs")},"data-v-14471b71",null).exports;n.a.use(a.a);var rt=new a.a({mode:"history",routes:[{path:"/",component:l,children:[{path:"",name:"home",component:x},{path:"recording/topics",name:"recording-topics",component:y},{path:"recording/start",name:"recording-start",component:V},{path:"recording/finish",name:"recording-finish",component:G},{path:"listening/topics",name:"listening-topics",component:Z},{path:"listening/watch",name:"listening-watch",component:et},{path:"send-us-your-story",name:"send-us-your-story",component:ot}]}]}),st=i("NYxO"),at=i("mtWM"),ct=i.n(at),lt={state:{selectedTopic:"",uploadedFileURL:"",currentView:"a",nextView:"b"},mutations:{resetTopic:function(t){console.log("resetting the selected topic"),t.selectedTopic=""},setTopic:function(t,e){var i=e.topic;console.log("set selectedTopic: ",i),t.selectedTopic=i},setFileURL:function(t,e){var i=e.fileURL;console.log("set uploadedFileURL",i),t.uploadedFileURL=i},switchView:function(t){var e=t.currentView;t.currentView=t.nextView,t.nextView=e}},actions:{uploadVideo:function(t,e){var i=e.blob,n=e.fileName;return new L.a(function(e,o){var r=new File([i],n,{type:"video/webm"}),s=new FormData;s.append("file",r),s.append("fileName",n),s.append("topic",t.state.selectedTopic),console.log("sending: ",s.get("file")),ct.a.post(k+z,s).then(function(i){console.log("video has been uploaded"),console.log("and received response: ",i.data),t.commit("setFileURL",{fileURL:i.data.fileURL}),e(i.data)}).catch(function(t){console.error(t),o(t)})})},getVideos:function(t){return new L.a(function(e,i){ct.a.post(k+P,{topic:t.state.selectedTopic}).then(function(t){var i=t.data.fileURLs;console.log("videos fetched",i),i.sort(function(t,e){return t=parseInt(t.slice(0,-5)),e=parseInt(e.slice(0,-5)),t.activity_id<e.activity_id?-1:t.activity_id>e.activity_id?1:0}),console.log("videos sorted",i),e(i)}).catch(function(t){console.error(t),i(t)})})},getTopics:function(){return new L.a(function(t,e){ct.a.get(k+U).then(function(e){var i=e.data.topics;console.log("topics fetched",i),t(i)}).catch(function(t){console.error(t),e(t)})})}},getters:{}},dt=i("UE8C"),ut=i.n(dt);n.a.use(st.a),n.a.mixin({methods:{jumpTo:function(t,e){this.$router.push({name:t,params:e})}}}),n.a.use(ut.a);var gt=new st.a.Store(lt);n.a.config.productionTip=!1,new n.a({el:"#app",router:rt,store:gt,template:"<App/>",components:{App:s}})},WpX3:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNTkuMSAzNTkuMSI+PHRpdGxlPnBsYXliYWNrLTM8L3RpdGxlPjxwYXRoIGQ9Ik0xNzkuNzcsMEExNzkuNTUsMTc5LjU1LDAsMSwwLDM1OS4zMiwxNzkuNTUsMTc5LjU1LDE3OS41NSwwLDAsMCwxNzkuNzcsMFpNMjk5Ljk1LDE4OS42NCwxMTYuODMsMjk2Yy02LjQ3LDMuNzUtMTMuNzMtMS43LTEzLjczLTEwLjA5VjczLjIyYzAtOC4zOSw3LjI2LTEzLjg0LDEzLjczLTEwLjA5bDE4My4zLDEwNi4zM0MzMDcuMywxNzMuNjIsMzA3LjEyLDE4NS40OCwyOTkuOTUsMTg5LjY0WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuMjIpIi8+PC9zdmc+"},dUDK:function(t,e){},feh2:function(t,e){},jLtp:function(t,e){},jPIW:function(t,e){},jzNX:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3OCA2MS45OCI+PHRpdGxlPmhvbWU8L3RpdGxlPjxwYXRoIGQ9Ik00OS44OCwxOWExLjIsMS4yLDAsMCwwLS41LjE2bC0zOCwzMGExLDEsMCwxLDAsMS4yNSwxLjU5TDUwLDIxLjI3bDM3LjM3LDI5LjVhMSwxLDAsMCwwLDEuNDEtLjE2LDEuMDUsMS4wNSwwLDAsMC0uMTYtMS40NGwtMzgtMzBBMS4yMSwxLjIxLDAsMCwwLDQ5Ljg4LDE5Wk0yNCw0NC4wOGwtMiwxLjU2VjgwYTEsMSwwLDAsMCwxLDFINDJhMSwxLDAsMCwwLDEtMVY2MUg1N1Y4MGExLDEsMCwwLDAsMSwxSDc3YTEsMSwwLDAsMCwxLTFWNDUuNjRsLTItMS41NlY3OUg1OVY2MGExLDEsMCwwLDAtMS0xSDQyYTEsMSwwLDAsMC0xLDFWNzlIMjRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTEgLTE5LjAxKSIvPjwvc3ZnPg=="},oSA7:function(t,e){},"ol+X":function(t,e){},r9Hs:function(t,e){},rKRb:function(t,e){},tltS:function(t,e){},uzaf:function(t,e){},wYpQ:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjUuODcgMjI1LjE4Ij48dGl0bGU+YmFjazwvdGl0bGU+PHBhdGggZD0iTTEyMS41LDIyLjgyYzEzLTEyLTYtMzEtMTgtMTlsLTk5LDk5YTEyLjI4LDEyLjI4LDAsMCwwLDAsMTlsOTksOTljMTIsMTMsMzEtNiwxOC0xOWwtODktODlaIi8+PC9zdmc+"},zE6X:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.585ceba098ae46634dd6.js.map